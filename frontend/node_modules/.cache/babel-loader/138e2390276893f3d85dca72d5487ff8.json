{"ast":null,"code":"const Storage = cartItems => {\n  localStorage.setItem('cart', JSON.stringify(cartItems.length > 0 ? cartItems : []));\n};\n\n_c = Storage;\nexport const sumItems = cartItems => {\n  Storage(cartItems);\n  let itemCount = cartItems.reduce((total, product) => total + product.quantity, 0);\n  debugger;\n  return {};\n};\nexport const CartReducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_CART\":\n      if (!state.cartItems[state.cartItems.findIndex(item => item.name === action.payload.name)]) {\n        state.cartItems.push({ ...action.payload,\n          quantity: 1\n        });\n      }\n\n      return { ...state,\n        ...sumItems(state.cartItems),\n        cartItems: [...state.cartItems]\n      };\n\n    case \"INCREASE\":\n      state.cartItems[state.cartItems.findIndex(item => item.name === action.payload.name)].quantity++;\n      return { ...state,\n        ...sumItems(state.cartItems),\n        cartItems: [...state.cartItems]\n      };\n\n    case \"DECREASE\":\n      state.cartItems[state.cartItems.findIndex(item => item.name === action.payload.name)].quantity--;\n      return { ...state,\n        ...sumItems(state.cartItems),\n        cartItems: [...state.cartItems]\n      };\n\n    case \"REMOVE_ITEM\":\n      return { ...state,\n        ...sumItems(state.cartItems.filter(item => item.name !== action.payload.name)),\n        cartItems: [...state.cartItems.filter(item => item.name !== action.payload.name)]\n      };\n\n    default:\n      break;\n  }\n};\n_c2 = CartReducer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Storage\");\n$RefreshReg$(_c2, \"CartReducer\");","map":{"version":3,"sources":["/home/vohai/Templates/rubik/react-context/src/contexts/CartReducer.ts"],"names":["Storage","cartItems","localStorage","setItem","JSON","stringify","length","sumItems","itemCount","reduce","total","product","quantity","CartReducer","state","action","type","findIndex","item","name","payload","push","filter"],"mappings":"AAGA,MAAMA,OAAO,GAAIC,SAAD,IAAoB;AAChCC,EAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,SAAS,CAACK,MAAV,GAAmB,CAAnB,GAAuBL,SAAvB,GAAkC,EAAjD,CAA7B;AACH,CAFD;;KAAMD,O;AAIN,OAAO,MAAMO,QAAQ,GAAIN,SAAD,IAAoB;AACxCD,EAAAA,OAAO,CAACC,SAAD,CAAP;AACA,MAAIO,SAAS,GAAGP,SAAS,CAACQ,MAAV,CAAiB,CAACC,KAAD,EAAQC,OAAR,KAAoBD,KAAK,GAAGC,OAAO,CAACC,QAArD,EAA+D,CAA/D,CAAhB;AACA;AACA,SAAO,EAAP;AACH,CALM;AAOP,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAaC,MAAb,KAA6B;AACpD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,UAAL;AACI,UAAG,CAACF,KAAK,CAACb,SAAN,CAAgBa,KAAK,CAACb,SAAN,CAAgBgB,SAAhB,CAA2BC,IAAD,IAAeA,IAAI,CAACC,IAAL,KAAcJ,MAAM,CAACK,OAAP,CAAeD,IAAtE,CAAhB,CAAJ,EAAiG;AAC7FL,QAAAA,KAAK,CAACb,SAAN,CAAgBoB,IAAhB,CAAqB,EACjB,GAAGN,MAAM,CAACK,OADO;AAEjBR,UAAAA,QAAQ,EAAE;AAFO,SAArB;AAIH;;AACD,aAAO,EACH,GAAGE,KADA;AAEH,WAAGP,QAAQ,CAACO,KAAK,CAACb,SAAP,CAFR;AAGHA,QAAAA,SAAS,EAAE,CAAC,GAAGa,KAAK,CAACb,SAAV;AAHR,OAAP;;AAKJ,SAAK,UAAL;AACIa,MAAAA,KAAK,CAACb,SAAN,CAAgBa,KAAK,CAACb,SAAN,CAAgBgB,SAAhB,CAA2BC,IAAD,IAAeA,IAAI,CAACC,IAAL,KAAcJ,MAAM,CAACK,OAAP,CAAeD,IAAtE,CAAhB,EAA6FP,QAA7F;AACA,aAAO,EACH,GAAGE,KADA;AAEH,WAAGP,QAAQ,CAACO,KAAK,CAACb,SAAP,CAFR;AAGHA,QAAAA,SAAS,EAAE,CAAC,GAAGa,KAAK,CAACb,SAAV;AAHR,OAAP;;AAKJ,SAAK,UAAL;AACIa,MAAAA,KAAK,CAACb,SAAN,CAAgBa,KAAK,CAACb,SAAN,CAAgBgB,SAAhB,CAA2BC,IAAD,IAAeA,IAAI,CAACC,IAAL,KAAcJ,MAAM,CAACK,OAAP,CAAeD,IAAtE,CAAhB,EAA6FP,QAA7F;AACA,aAAO,EACH,GAAGE,KADA;AAEH,WAAGP,QAAQ,CAACO,KAAK,CAACb,SAAP,CAFR;AAGHA,QAAAA,SAAS,EAAE,CAAC,GAAGa,KAAK,CAACb,SAAV;AAHR,OAAP;;AAKJ,SAAK,aAAL;AACI,aAAO,EACH,GAAGa,KADA;AAEH,WAAGP,QAAQ,CAACO,KAAK,CAACb,SAAN,CAAgBqB,MAAhB,CAAwBJ,IAAD,IAAeA,IAAI,CAACC,IAAL,KAAcJ,MAAM,CAACK,OAAP,CAAeD,IAAnE,CAAD,CAFR;AAGHlB,QAAAA,SAAS,EAAE,CAAC,GAAGa,KAAK,CAACb,SAAN,CAAgBqB,MAAhB,CAAwBJ,IAAD,IAAeA,IAAI,CAACC,IAAL,KAAcJ,MAAM,CAACK,OAAP,CAAeD,IAAnE,CAAJ;AAHR,OAAP;;AAKJ;AACI;AAlCR;AAoCH,CArCM;MAAMN,W","sourcesContent":["\n\n\nconst Storage = (cartItems: any) => {\n    localStorage.setItem('cart', JSON.stringify(cartItems.length > 0 ? cartItems: []));\n}\n\nexport const sumItems = (cartItems: any) => {\n    Storage(cartItems);\n    let itemCount = cartItems.reduce((total, product) => total + product.quantity, 0);\n    debugger\n    return {};\n}\n\nexport const CartReducer = (state: any, action: any) => {\n    switch (action.type) {\n        case \"ADD_CART\":\n            if(!state.cartItems[state.cartItems.findIndex((item: any) => item.name === action.payload.name)]){\n                state.cartItems.push({\n                    ...action.payload,\n                    quantity: 1\n                })\n            }\n            return {\n                ...state,\n                ...sumItems(state.cartItems),\n                cartItems: [...state.cartItems]\n            }\n        case \"INCREASE\":\n            state.cartItems[state.cartItems.findIndex((item: any) => item.name === action.payload.name)].quantity++\n            return {\n                ...state,\n                ...sumItems(state.cartItems),\n                cartItems: [...state.cartItems]\n            }\n        case \"DECREASE\":\n            state.cartItems[state.cartItems.findIndex((item: any) => item.name === action.payload.name)].quantity--\n            return {\n                ...state,\n                ...sumItems(state.cartItems),\n                cartItems: [...state.cartItems]\n            }\n        case \"REMOVE_ITEM\":\n            return {\n                ...state,\n                ...sumItems(state.cartItems.filter((item: any) => item.name !== action.payload.name)),\n                cartItems: [...state.cartItems.filter((item: any) => item.name !== action.payload.name)]\n            }\n        default:\n            break;\n    }\n}"]},"metadata":{},"sourceType":"module"}